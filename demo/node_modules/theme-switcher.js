const bel = require("bel")
const csjs = require('csjs-inject')

const id = 'theme-switcher'
var counter = 1

module.exports = themeSwitcher

function themeSwitcher ({ theme, init }, protocol) {
  const name = `${id}/${counter++}`
  const notify = protocol(msg => { /* themeSwitch currently ignores all received messages */})
  return bel`<section class=${css.themeSwitch}>
    <span class="${css.colorplate} ${css.cubeWhite}" onclick=${onLightTheme}></span>
    <span class="${css.colorplate} ${css.cubeDark}" onclick=${onDarkTheme}></span>
  </section>`
  function onLightTheme (event) { 
    setTheme('lightTheme')
  }
  function onDarkTheme (event) { 
    setTheme('darkTheme') 
  }
  function setTheme (name) {
    const variables = Object.assign({}, theme(name))
    notify({ type: 'theme', body: variables })
  }
}
const css = csjs`
.themeSwitch {
  text-align: right;
}
.colorplate {
  display: inline-block;
  width: 20px;
  height: 20px;
  margin-left: 5px;
  border: 1px solid #888;
  border-radius: 6px;
  cursor: pointer;
}
.cubeWhite {
  background-color: #fff;
}
.cubeDark {
  background-color: #1D1D26;
}`