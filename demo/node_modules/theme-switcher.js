const bel = require("bel")
const csjs = require('csjs-inject')

const id = 'theme-switcher'
var counter = 1

module.exports = themeSwitcher

function themeSwitcher ({ data }, protocol) {
  const name = `${id}/${counter++}`
  const themes = data.themes || []
  const notify = protocol(msg => { /* themeSwitch currently ignores all received messages */})
  return bel`<section class=${css.themeSwitch}>
    ${themes.map(name => bel`
      <span class="${css.colorplate} ${css[name]}" onclick=${() => setTheme(name)}></span>
    `)}
  </section>`
  function setTheme (name) { notify({ type: 'theme', body: name }) }
}
const css = csjs`
.themeSwitch {
  text-align: right;
}
.colorplate {
  display: inline-block;
  width: 20px;
  height: 20px;
  margin-left: 5px;
  border: 1px solid #888;
  border-radius: 6px;
  cursor: pointer;
}
.lightTheme {
  background-color: #fff;
}
.darkTheme {
  background-color: #1D1D26;
}`